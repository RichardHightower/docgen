---
title: Execute Mermaid Command
---

sequenceDiagram
    participant MermaidUtils
    participant StringBuilder
    participant Latch
    participant Service
    participant Reader
    participant Task
    participant Result
    participant FileUtils

    MermaidUtils ->> StringBuilder: Create output and error StringBuilders
    MermaidUtils ->> Latch: Initialize with count 2
    MermaidUtils ->> Service: Create new Service
    MermaidUtils ->> Task: Execute command
    Service ->> Reader: Submit read output task
    Service ->> Reader: Submit read error task
    MermaidUtils ->> Task: Wait for process to complete
    alt Timeout
        MermaidUtils ->> StringBuilder: Append timeout message to error StringBuilder
    MermaidUtils ->> Service: Shut down Service
    MermaidUtils ->> Task: Get exit code
    alt Exit code not zero
        MermaidUtils ->> FileUtils: Read input file
        MermaidUtils ->> Result: Create Result with exit code, output StringBuilder, error StringBuilder, and null exception
        Result -->> MermaidUtils: Return Result
    else Exit code zero
    end
